В Hyper-V нужно создать сетевой интерфейс внешней сети
Параметры сети перекочуют с сетевой карты на этот интерфейс.
После чего пот создании ВМ нужно указывать этот интерфейс.
В Desktop UBUNTU нужно установить SSH сервер
https://ubuntu.com/server/docs/service-openssh

sudo apt install openssh-server

проверка работоспособности

sudo systemctl status sshd.service

=================================
Сейчас настроены:
GUI Ubuntu - 192.168.0.14
Ubuntu-server - 192.168.0.13
=================================

Далее настройка netplan
https://ubuntu.com/server/docs/configuring-networks

Проверяем конфигурацию сети:

ip link
ip a

Ищем файл netplan
ls /etc/netplan/

если его нет или он пустой, создаем новый

Создание конфигурационного файла netplan

sudo nano /etc/netplan/01-netcfg.yaml

network:
  version: 2
  renderer: networkd
  ethernets:
    eth0:
      dhcp4: no
      addresses:
        - 172.19.183.99/20
      routes:
        - to: default
          via: 172.19.176.1
      nameservers:
        addresses:
          - 8.8.8.8
          - 8.8.4.4
        search: [mshome.net]

Здесь мы выполним следующее:

Указываем, что DHCP не используется для интерфейса eth0 (dhcp4: no).
Задаём статический IP-адрес 172.19.183.99 с маской подсети /20.
Используем секцию routes, чтобы определить шлюз по умолчанию (via: 172.19.176.1). Это заменяет устаревший параметр gateway4.
Указываем публичные DNS-сервера Google (8.8.8.8 и 8.8.4.4) в качестве предпочтительных серверов имен. Вы можете изменить эти адреса на любые другие DNS-серверы по вашему выбору.
Добавлен поисковый домен mshome.net, чтобы демонстрировать, как задать поисковые домены.
После внесения изменений сохраните файл и закройте редактор (в nano это делается через Ctrl+O, Enter для сохранения и Ctrl+X для выхода).

Примените изменения конфигурации Netplan:

sudo netplan apply

Не забудьте проверить права доступа к конфигурационному файлу, чтобы исключить предупреждения о слишком широких разрешениях:

sudo chmod 600 /etc/netplan/01-netcfg.yaml

Проверьте конфигурацию сети:

ip addr show eth0

Проверьте статус systemd-resolved:

systemctl status systemd-resolved.service

Если отсутствует ovsdb-server

Установка Open vSwitch. Выполните следующую команду для установки Open vSwitch:

sudo apt update
sudo apt install openvswitch-switch

Эта команда установит openvswitch-switch, который включает в себя не только пользовательский интерфейс командной строки ovs-vsctl для управления Open vSwitch, но также и сервис ovsdb-server.

После установки попробуйте запустить и включить службу снова:

sudo systemctl start ovsdb-server
sudo systemctl enable ovsdb-server

Проверка статуса службы. После того как служба была запущена, можно проверить её состояние следующей командой:

systemctl status ovsdb-server

Если вы ранее не работали с Open vSwitch или он вам не нужен для работы, возможно, упоминание этой службы в ошибке было связано с некоторыми настройками или зависимостями, которые не играют роли для вашей текущей сетевой конфигурации на Netplan. В таком случае, если Open vSwitch не требуется для вашей работы, его можно игнорировать, фокусируясь на других аспектах сетевой конфигурации и решении ваших первоначальных задач.


----2024-03-30-----------Ubuntu-server--------------------
network:
  version: 2
  renderer: networkd
  ethernets:
    eth0:
      addresses:
        - 192.168.0.13/24
      routes:
        - to: default
          via: 192.168.0.1
      nameservers:
          search: [mydomain, otherdomain]
          addresses: [1.1.1.1, 8.8.8.8, 4.4.4.4]
